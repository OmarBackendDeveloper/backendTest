import { EndpointError } from "@smithy/util-endpoints/dist-cjs/types";
import { callFunction } from "@smithy/util-endpoints/dist-cjs/utils/callFunction";
import { evaluateTemplate } from "@smithy/util-endpoints/dist-cjs/utils/evaluateTemplate";
import { getReferenceValue } from "@smithy/util-endpoints/dist-cjs/utils/getReferenceValue";
export const evaluateExpression = (obj, keyName, options) => {
    if (typeof obj === "string") {
        return evaluateTemplate(obj, options);
    }
    else if (obj["fn"]) {
        return callFunction(obj, options);
    }
    else if (obj["ref"]) {
        return getReferenceValue(obj, options);
    }
    throw new EndpointError(`'${keyName}': ${String(obj)} is not a string, function or reference.`);
};
