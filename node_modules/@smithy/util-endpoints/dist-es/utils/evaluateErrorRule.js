import { EndpointError } from "@smithy/util-endpoints/dist-cjs/types";
import { evaluateConditions } from "@smithy/util-endpoints/dist-cjs/utils/evaluateConditions";
import { evaluateExpression } from "@smithy/util-endpoints/dist-cjs/utils/evaluateExpression";
export const evaluateErrorRule = (errorRule, options) => {
    const { conditions, error } = errorRule;
    const { result, referenceRecord } = evaluateConditions(conditions, options);
    if (!result) {
        return;
    }
    throw new EndpointError(evaluateExpression(error, "Error", {
        ...options,
        referenceRecord: { ...options.referenceRecord, ...referenceRecord },
    }));
};
